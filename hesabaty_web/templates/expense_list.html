{% extends 'base.html' %}
{% block title %}ุงููุตุฑููุงุช{% endblock %}

{% block content %}
<!-- โ ุนููุงู ุงูุตูุญุฉ -->
<div class="mb-5 mt-4">
    <h2 class="text-center text-primary fw-bold mb-4">๐ธ ููุญุฉ ุงููุตุฑููุงุช</h2>
</div>

<!-- โ ููุฎุต ุงููุตุฑููุงุช -->
<div class="row text-center mb-5 g-3">
    <div class="col-md-4">
        <div class="card shadow-sm border-primary">
            <div class="card-body">
                <h5 class="card-title text-primary">ุฅุฌูุงูู ุงููุตุฑููุงุช</h5>
                <p class="card-text fs-4 fw-bold">{{ total }} ุฑ.ุณ</p>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="card shadow-sm border-success">
            <div class="card-body">
                <h5 class="card-title text-success">ูุตุฑููุงุช ูุฑุชุจุทุฉ ุจุงููุดุฑูุน</h5>
                <p class="card-text fs-5">{{ total_related }} ุฑ.ุณ</p>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="card shadow-sm border-danger">
            <div class="card-body">
                <h5 class="card-title text-danger">ูุตุฑููุงุช ุบูุฑ ูุฑุชุจุทุฉ</h5>
                <p class="card-text fs-5">{{ total_unrelated }} ุฑ.ุณ</p>
            </div>
        </div>
    </div>
</div>

<!-- โ ููุงุชุฑ -->
<div class="mb-4 text-center">
    <a href="?filter=related" class="btn btn-outline-primary me-2 mb-2">๐ ูุฑุชุจุท ุจุงููุดุฑูุน</a>
    <a href="?filter=unrelated" class="btn btn-outline-danger me-2 mb-2">๐ ุบูุฑ ูุฑุชุจุท ุจุงููุดุฑูุน</a>
    <a href="?filter=utilities" class="btn btn-outline-info me-2 mb-2">๐ง ููุฑุจุงุก & ูุงุก</a>
    <a href="?filter=salary" class="btn btn-outline-warning me-2 mb-2">๐จโ๐ผ ุฑูุงุชุจ</a>
    <a href="?filter=rent" class="btn btn-outline-success me-2 mb-2">๐ข ุฅูุฌุงุฑ</a>
    <a href="?filter=other" class="btn btn-outline-dark mb-2">๐ฆ ุฃุฎุฑู</a>
</div>

<!-- โ ุฒุฑ ุงูุฅุถุงูุฉ -->
<div class="text-end mb-4">
    <a href="{% url 'add_expense' %}" class="btn btn-success">
        โ ุฅุถุงูุฉ ุตุฑู
    </a>
</div>

<!-- โ ุฌุฏูู ุงููุตุฑููุงุช -->
<div class="table-responsive">
  <table class="table table-bordered text-center align-middle shadow-sm">
    <thead class="table-light">
      <tr>
        <th>ุงูุชุงุฑูุฎ</th>
        <th>ุงููุฆุฉ</th>
        <th>ุงูุชุตููู ุงููุฎุตุต</th>
        <th>ุงููุตู</th>
        <th>ุงููุจูุบ</th>
        <th>ุงููุทุงู</th>
        <th>ูุชูุฑุฑ</th>
        <th>ุงูุฎูุงุฑุงุช</th>
      </tr>
    </thead>
    <tbody>
      {% for e in expenses %}
      <tr>
        <td>{{ e.created_at|date:"Y-m-d" }}</td>
        <td>{{ e.get_category_display }}</td>
        <td>{{ e.custom_category|default:"-" }}</td>
        <td>{{ e.description|default:"-" }}</td>
        <td class="
          {% if e.amount < 500 %}text-success
          {% elif e.amount < 1000 %}text-warning
          {% else %}text-danger{% endif %}
          fw-bold">
          {{ e.amount }} ุฑ.ุณ
        </td>
        <td>{{ e.get_project_scope_display }}</td>
        <td>
          {% if e.is_recurring %}
            <span class="badge bg-info text-dark">ุดูุฑู ูุชูุฑุฑ</span>
          {% else %}
            <span class="text-muted">-</span>
          {% endif %}
        </td>
        <td>
            <a href="{% url 'edit_expense' e.id %}" class="btn btn-sm btn-outline-primary me-1">
                โ๏ธ ุชุนุฏูู
            </a>
            <a href="{% url 'delete_expense' e.id %}" class="btn btn-sm btn-outline-danger" onclick="return confirm('ูู ุฃูุช ูุชุฃูุฏ ูู ุญุฐู ูุฐุง ุงููุตุฑููุ');">
                ๐๏ธ ุญุฐู
            </a>
        </td>
      </tr>
      {% empty %}
      <tr>
        <td colspan="8">ูุง ุชูุฌุฏ ูุตุฑููุงุช ุญุงููุงู.</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}